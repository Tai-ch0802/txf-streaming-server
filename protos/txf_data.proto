syntax = "proto3";

package txf;

// =============================================================================
// Tick Data (成交明細) - 極致緊湊版
// =============================================================================
message Tick {
  // --- 1. 識別與時間 ---
  string code = 1;
  int64 timestamp_ms = 2;

  // --- 2. 核心價格與量 (原本散落在 4, 8, 13) ---
  // (移到前面，確保使用 1-byte 標頭)
  int64 close = 3;            // 現價
  int32 volume = 4;           // 單筆量
  
  // --- 3. 交易屬性 (原本在 15) ---
  int32 tick_type = 5;        // 1:外盤, 2:內盤

  // --- 4. 輔助數據 (原本在 4, 14) ---
  int64 underlying_price = 6; // 標的物價格
  int32 total_volume = 7;     // 總量 (檢核用)
  
  // (目前只用到 7 號，未來還有 8~15 號這 8 個 "黃金空位" 可以擴充)
}

// =============================================================================
// BidAsk Data (最佳五檔) - 結構已最佳化
// =============================================================================
message BidAsk {
  // --- 1. 識別與時間 ---
  string code = 1;
  int64 timestamp_ms = 2;

  // --- 2. 委託總量 ---
  int32 bid_total_vol = 3;
  int32 ask_total_vol = 4;

  // --- 3. 五檔核心 (List) ---
  // (這些欄位資料量最大，放在前 15 號至關重要)
  repeated int64 bid_price = 5;
  repeated int32 bid_volume = 6;
  repeated int32 diff_bid_vol = 7; 

  repeated int64 ask_price = 8;
  repeated int32 ask_volume = 9;
  repeated int32 diff_ask_vol = 10;
  
  // (剛好用到 10 號，非常完美)
}